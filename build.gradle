apply plugin: 'idea'
apply plugin: 'groovy'

repositories {
    mavenCentral()
}

configurations {
    database
}

dependencies {
    compile gradleApi()
    compile localGroovy()
    database 'mysql:mysql-connector-java:5.1.18'
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.11'
}

idea.project.ipr {
    withXml { provider ->
        provider.node.component
                .find { it.@name == 'VcsDirectoryMappings' }
                .mapping.@vcs = 'Git'
    }
}

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath fileTree(dir: 'libs', include: '*.jar')
    }
}

apply plugin: 'me.zeph.database'

database {
    url = 'jdbc:mysql://localhost:3306/relations'
    username = 'root'
    password = ''
    driver = 'com.mysql.jdbc.Driver'
    sqlFiles = ['a', 'b']
    sqls = ['DROP TABLE RELT_KIT;',
            'CREATE TABLE RELT_KIT (\n' +
            '  ID   INT         NOT NULL AUTO_INCREMENT,\n' +
            '  NAME VARCHAR(20) NOT NULL,\n' +
            '  CONSTRAINT RELT_KIT_PK PRIMARY KEY (ID)\n' +
            ');']
    configurationName = 'database'
}

task copyLibs(type: Copy) {
    from 'build/libs'
    into 'libs'
}